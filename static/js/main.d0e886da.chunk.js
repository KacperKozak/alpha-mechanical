(this["webpackJsonpalpha-mechanical"]=this["webpackJsonpalpha-mechanical"]||[]).push([[0],{72:function(e){e.exports=JSON.parse('[{"type":"Button","xy":[4,0],"id":"Button36","elevation":0.7727378891656571,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{"targetId":"Dor39"}},{"type":"Player","xy":[1,1],"id":"player","elevation":0.004554653802169535,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Cannon","xy":[1,2],"id":"Cannon37","elevation":0.023719882689449284,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Fence","xy":[2,2],"id":"Fence38","elevation":0.14708313636864742,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Dor","xy":[5,2],"id":"Dor39","elevation":0.3073622023667952,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"BigRock","xy":[1,3],"id":"BigRock40","elevation":0.1596364384952699,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Fence","xy":[3,3],"id":"Fence41","elevation":0.2732311326578374,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Crossbow","xy":[4,3],"id":"Crossbow42","elevation":0.1741372397351315,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"BigRock","xy":[5,3],"id":"BigRock43","elevation":0.11393828002778424,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"RockFloor","xy":[0,0],"id":"RockFloor1","elevation":0.5335905367370637,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[1,0],"id":"RockFloor2","elevation":0.411947581067307,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[2,0],"id":"RockFloor3","elevation":0.709161134922119,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[3,0],"id":"RockFloor4","elevation":0.41661526883141176,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[4,0],"id":"RockFloor5","elevation":0.7727378891656571,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[5,0],"id":"RockFloor6","elevation":0.5364905248531244,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,0],"id":"RockFloor7","elevation":0.7419039416550426,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[0,1],"id":"RockFloor8","elevation":0.052159383337593734,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[1,1],"id":"Grass9","elevation":0.004554653802169535,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Ice","xy":[2,1],"id":"Ice10","elevation":0.051701787493677674,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Ice","xy":[3,1],"id":"Ice11","elevation":0.23219596521507357,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[4,1],"id":"Grass12","elevation":0.10621038331792317,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[5,1],"id":"Grass13","elevation":0.10592078811604051,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,1],"id":"RockFloor14","elevation":0.03613113643061849,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[0,2],"id":"RockFloor15","elevation":0.5007729401800809,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[1,2],"id":"Grass16","elevation":0.023719882689449284,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[2,2],"id":"Grass17","elevation":0.14708313636864742,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[3,2],"id":"RockFloor18","elevation":0.5608467172879572,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[4,2],"id":"RockFloor19","elevation":0.8941847398263449,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[5,2],"id":"Grass20","elevation":0.3073622023667952,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,2],"id":"RockFloor21","elevation":0.0788738366831967,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[0,3],"id":"RockFloor22","elevation":0.0493754094254204,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[1,3],"id":"Grass23","elevation":0.1596364384952699,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[2,3],"id":"Grass24","elevation":0.2067872660512223,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[3,3],"id":"RockFloor25","elevation":0.2732311326578374,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[4,3],"id":"Grass26","elevation":0.1741372397351315,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[5,3],"id":"Grass27","elevation":0.11393828002778424,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,3],"id":"RockFloor28","elevation":0.874044805540152,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[0,4],"id":"RockFloor29","elevation":0.6312413658535625,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[1,4],"id":"RockFloor30","elevation":0.4848617040661092,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[2,4],"id":"RockFloor31","elevation":0.05352672070686948,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[3,4],"id":"RockFloor32","elevation":0.4433956082443995,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[4,4],"id":"RockFloor33","elevation":0.9956976225648844,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[5,4],"id":"RockFloor34","elevation":0.6622566617116046,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,4],"id":"RockFloor35","elevation":0.5244690371740013,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}}]')},73:function(e){e.exports=JSON.parse('[{"type":"Button","xy":[4,0],"id":"Button36","elevation":0.057662008100778595,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{"targetId":"Dor39"}},{"type":"Player","xy":[1,1],"id":"player","elevation":0.0629924593893499,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Cannon","xy":[1,2],"id":"Cannon37","elevation":0.28782596941937344,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"RocketProjectile","xy":[2,2],"id":"Fence38","elevation":0.19947571968285946,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Dor","xy":[5,2],"id":"Dor39","elevation":0.17559858324138156,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Cannon","xy":[1,3],"id":"BigRock40","elevation":0.27936334627277487,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"CrossbowProjectile","xy":[3,3],"id":"Fence41","elevation":0.9274678182244549,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Cannon","xy":[4,3],"id":"Crossbow42","elevation":0.13694831892056306,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"Ice","xy":[5,3],"id":"BigRock43","elevation":0.156932606871358,"rotation":[0,0],"zIndex":2,"aIndex":10,"data":{}},{"type":"RockFloor","xy":[0,0],"id":"RockFloor1","elevation":1,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[1,0],"id":"RockFloor2","elevation":2,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[2,0],"id":"RockFloor3","elevation":2,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[3,0],"id":"RockFloor4","elevation":2,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[4,0],"id":"RockFloor5","elevation":0.057662008100778595,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[5,0],"id":"RockFloor6","elevation":0.2992798136647461,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,0],"id":"RockFloor7","elevation":0.06049729182518093,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[0,1],"id":"RockFloor8","elevation":1,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[1,1],"id":"Grass9","elevation":0.0629924593893499,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Ice","xy":[2,1],"id":"Ice10","elevation":0.12339617674643606,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Ice","xy":[3,1],"id":"Ice11","elevation":0.2070882542803735,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[4,1],"id":"Grass12","elevation":0.20389319214541235,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[5,1],"id":"Grass13","elevation":0.004159705254942321,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,1],"id":"RockFloor14","elevation":0.5304743467784285,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[0,2],"id":"RockFloor15","elevation":0.07875049171074644,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[1,2],"id":"Grass16","elevation":0.28782596941937344,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[2,2],"id":"Grass17","elevation":0.19947571968285946,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[3,2],"id":"RockFloor18","elevation":1,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[4,2],"id":"RockFloor19","elevation":0.15100491717525544,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[5,2],"id":"Grass20","elevation":0.17559858324138156,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,2],"id":"RockFloor21","elevation":0.06651309658217341,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[0,3],"id":"RockFloor22","elevation":0.20450066852452786,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[1,3],"id":"Grass23","elevation":0.27936334627277487,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[2,3],"id":"Grass24","elevation":0.2616342603927058,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[3,3],"id":"RockFloor25","elevation":0.9274678182244549,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[4,3],"id":"Grass26","elevation":0.13694831892056306,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[5,3],"id":"Grass27","elevation":0.156932606871358,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,3],"id":"RockFloor28","elevation":0.668162964173683,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[0,4],"id":"RockFloor29","elevation":0.8628015144519006,"rotation":[1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[1,4],"id":"RockFloor30","elevation":0.6460454323369178,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[2,4],"id":"RockFloor31","elevation":0.35897214732905236,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[3,4],"id":"RockFloor32","elevation":0.3353443439306161,"rotation":[-1,0],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[4,4],"id":"RockFloor33","elevation":0.8059138035034288,"rotation":[0,-1],"zIndex":1,"aIndex":100,"data":{}},{"type":"Grass","xy":[5,4],"id":"RockFloor34","elevation":0.1566933193492437,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}},{"type":"RockFloor","xy":[6,4],"id":"RockFloor35","elevation":0.5900661227230564,"rotation":[0,1],"zIndex":1,"aIndex":100,"data":{}}]')},76:function(e,t,n){e.exports=n(87)},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),i=n(24),c=n.n(i),d=n(23),l=n(25),u=n(64),s=n(93),p=n(95),x=n(11),y=n(96),v=n(48),f=n(89),b=n(90),m=n(71),I=n(75),h=n(94),j=n(14),g=n(4),O=n(5),k=n(65),E=n.n(k),R=n(66),F=n(7),z=function(e,t){var n=Object(F.a)(e,2),a=n[0],o=n[1],r=Object(F.a)(t,2);return[a+r[0],o+r[1]]},w=function(e,t){return e.find((function(e){return e.id===t}))},C=function(e,t){return e.filter((function(e){return function(e,t){var n=Object(F.a)(e,2),a=n[0],o=n[1],r=Object(F.a)(t,2),i=r[0],c=r[1];return a===i&&o===c}(e.xy,t)}))},_=function(e){return Array.isArray(e)?e:[e]},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Object(g.a)(e),Object(g.a)(_(t)))},G=[0,-1],q=[1,0],B=[0,1],A=[-1,0];!function(e){e.Player="Player",e.WinTrigger="WinTrigger",e.Grass="Grass",e.RockFloor="RockFloor",e.Box="Box",e.BigRock="BigRock",e.Fence="Fence",e.Button="Button",e.Dor="Dor",e.Ice="Ice",e.Crossbow="Crossbow",e.Cannon="Cannon",e.Boom="Boom",e.CrossbowProjectile="CrossbowProjectile",e.RocketProjectile="RocketProjectile"}(a||(a={}));var P,M,T,D={0:a.Grass,1:a.RockFloor,3:a.Ice},N=[[1,1,1,1,1,1,1],[1,0,3,3,0,0,1],[1,0,0,1,1,0,1],[1,0,0,1,0,0,1],[1,1,1,1,1,1,1]],L={1:a.Player,2:a.BigRock,3:a.Cannon,4:a.Crossbow,5:a.Fence,6:a.Dor,7:a.Button,8:a.Box,9:a.WinTrigger},J=[[0,0,0,0,7,0,0],[0,1,0,8,0,0,0],[0,3,5,8,0,6,0],[0,2,0,5,4,2,0],[0,0,0,0,0,9,0]],H=n(2),W=n(10),U=n(29),Y=n(1),V=n(30),Q=function(e){return r.a.createElement(X,Object.assign({},e,{url:"fence.gltf"}))},X=function(e){var t=e.url,n=e.instance,a=n.xy,o=n.elevation,i=n.rotation,c=e.castShadow,d=void 0===c||c,l=e.receiveShadow,u=void 0===l||l,s=e.elevationFix,p=void 0===s?0:s,x=Object(V.b)({pos:[a[0],o+p,a[1]],rot:[0,$(i),0]}),y=Object(W.f)(U.a,"".concat("/alpha-mechanical","/assets/").concat(t)).scene.clone();return d&&(y.children[0].castShadow=!0),u&&(y.children[0].receiveShadow=!0),y.scale.set(.5,.5,.5),r.a.createElement(V.a.primitive,{object:y,position:x.pos,rotation:x.rot})},K=function(e){var t=e.url,n=e.instance,a=n.xy,o=n.elevation,i=n.rotation,c=n.data,d=e.castShadow,l=void 0===d||d,u=e.receiveShadow,s=void 0===u||u,p=Object(V.b)({pos:[a[0],o,a[1]],rot:[0,$(i),0]}),x=Object(W.f)(U.a,"".concat("/alpha-mechanical","/assets/").concat(t));x.scene.scale.set(.5,.5,.5),l&&(x.scene.children[0].castShadow=!0),s&&(x.scene.children[0].receiveShadow=!0);var y=Object(W.f)(U.a,"".concat("/alpha-mechanical","/assets/animations/boring.gltf")),v=new Y.AnimationMixer(y.scene);y.animations.forEach((function(e){v.clipAction(e,x.scene).play()})),Object(W.e)((function(){return v.update(.02)}));var f=Object(W.f)(U.a,"".concat("/alpha-mechanical","/assets/rakietnica_srednia.gltf")).scene.clone(),b=Object(W.f)(U.a,"".concat("/alpha-mechanical","/assets/kusza.gltf")).scene.clone();return r.a.createElement(V.a.group,{position:p.pos,rotation:p.rot},r.a.createElement("primitive",{object:x.scene},r.a.createElement("primitive",{object:f,visible:"cannon"==c.gun}),r.a.createElement("primitive",{object:b,visible:"crossbow"==c.gun})))},Z=function(e){var t=e.url,n=e.instance,a=n.xy,o=n.elevation,i=n.rotation,c=(n.data,e.castShadow),d=void 0===c||c,l=e.receiveShadow,u=void 0===l||l,s=Object(V.b)({pos:[a[0],o,a[1]],rot:[0,$(i),0]}),p=Object(W.f)(U.a,"".concat("/alpha-mechanical","/assets/").concat(t)),x=p.scene.clone();d&&(x.children[0].castShadow=!0),u&&(x.children[0].receiveShadow=!0),x.scale.set(.5,.5,.5);var y=new Y.AnimationMixer(x);return p.animations.forEach((function(e,t){y.clipAction(e,x.children[t]).play()})),Object(W.e)((function(){y.update(.03),y.time>.8&&(y.stopAllAction(),x.visible=!1)})),r.a.createElement(V.a.group,{position:s.pos,rotation:s.rot},r.a.createElement("primitive",{object:x}))},$=function(e){return 1===e[0]&&0===e[1]?Math.PI/2:0===e[0]&&-1===e[1]?Math.PI/2*2:-1===e[0]&&0===e[1]?Math.PI/2*3:0},ee=function(e){return function(t){return r.a.createElement("div",Object.assign({style:{width:"100%",height:"100%",backgroundColor:e,fontSize:9}},t))}},te=(P={},Object(H.a)(P,a.Grass,{name:"Grass",height:function(){return 0},Component:ee("green"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"grass_002_export_test_1_cube.gltf",castShadow:!1,receiveShadow:!0}))}}),Object(H.a)(P,a.Ice,{name:"Ice",height:function(){return 0},enter:function(e){var t=e.who,n=e.vector;return[Oe({targetId:t.id,vector:n})]},Component:ee("lightblue"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"ice_002_export_test_1_cube.gltf",castShadow:!1,receiveShadow:!0}))}}),Object(H.a)(P,a.RockFloor,{name:"Rock floor",height:function(){return 0},push:function(e){e.force,e.self;return[]},Component:ee("gray"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"rock.gltf",castShadow:!1,receiveShadow:!0}))}}),P),ne={button:"".concat("/alpha-mechanical","/sounds/Button_gameplay.mp3"),music:"".concat("/alpha-mechanical","/sounds/elementary1.mp3"),Alert_NO:"".concat("/alpha-mechanical","/sounds/Alert_NO.mp3"),Alert_YES:"".concat("/alpha-mechanical","/sounds/Alert_YES.mp3"),Bazooka:"".concat("/alpha-mechanical","/sounds/Bazooka.mp3"),Crossbow:"".concat("/alpha-mechanical","/sounds/Crossbow.mp3"),Engine_start:"".concat("/alpha-mechanical","/sounds/Engine_start.mp3"),Engine_LOOP_128:"".concat("/alpha-mechanical","/sounds/Engine_LOOP_128.mp3"),Engine_NO_1:"".concat("/alpha-mechanical","/sounds/Engine_NO_1.mp3"),Engine_NO_2:"".concat("/alpha-mechanical","/sounds/Engine_NO_2.mp3"),Engine_stop:"".concat("/alpha-mechanical","/sounds/Engine_stop.mp3"),Equip_1:"".concat("/alpha-mechanical","/sounds/Equip_1.mp3"),Equip_2:"".concat("/alpha-mechanical","/sounds/Equip_2.mp3"),Equip_3:"".concat("/alpha-mechanical","/sounds/Equip_3.mp3"),Equip_4:"".concat("/alpha-mechanical","/sounds/Equip_4.mp3"),Hero_1:"".concat("/alpha-mechanical","/sounds/Hero_1.mp3"),Hero_2:"".concat("/alpha-mechanical","/sounds/Hero_2.mp3"),Jump:"".concat("/alpha-mechanical","/sounds/Jump.mp3")},ae=function(e,t){var n=new Audio(ne[e]);t&&(n.volume=t),n.play()},oe=function(e){ae(["Equip_1","Equip_2","Equip_3","Equip_4"][Math.round(4*Math.random())],e)},re=new Audio(ne.Engine_LOOP_128),ie=function(e){return function(t){var n=t.instance,o=t.children;return r.a.createElement("div",{style:{margin:"20%",width:"60%",height:"60%",borderRadius:n.type===a.Player?100:5,backgroundColor:e,color:"black",opacity:.7}},r.a.createElement("pre",{style:{padding:2,fontSize:8}},o))}},ce=(M={},Object(H.a)(M,a.Player,{name:"Player",height:function(){return 2},Component:ie("white"),Component3d:function(e){return r.a.createElement(K,Object.assign({},e,{url:"robot_model.gltf"}))}}),Object(H.a)(M,a.BigRock,{name:"Big rock",height:function(){return.55},Component:ie("gray"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"rock1.gltf"}))}}),Object(H.a)(M,a.Box,{name:"Box",height:function(){return 1},push:function(e){var t=e.self,n=e.vector;return[Oe({targetId:t.id,vector:n})]},Component:ie("brown"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"box.gltf"}))}}),Object(H.a)(M,a.Fence,{name:"Fence",height:function(){return 1.5},push:function(e){var t=e.force,n=e.self;return t&&t>=50?[_e(n.id)]:[]},Component:ie("brown"),Component3d:Q}),Object(H.a)(M,a.Button,{name:"Button",height:function(){return 2},push:function(e){e.state;var t=e.self;if(ae("button"),!t.data.targetId)return console.warn("Missing Button data.targetId"),[];var n=!t.data.open;return[Ce({targetId:t.id,data:{open:n}}),Ce({targetId:t.data.targetId,data:{open:n}})]},Component:ie("blue"),Component3d:Q}),Object(H.a)(M,a.WinTrigger,{name:"WinTrigger",height:function(){return 0},enter:function(e){var t=e.who;e.state,e.self;return"player"===t.id?(ae("Engine_start"),[me()]):[]},Component:ie("#ABC123"),Component3d:(T="#ABC123",function(e){var t=e.instance,n=t.xy,a=t.elevation,o=t.rotation;return r.a.createElement("mesh",{position:[n[0],a,n[1]],rotation:[0,$(o),0]},r.a.createElement("boxBufferGeometry",{attach:"geometry",args:[.5,1,.5]}),r.a.createElement("meshStandardMaterial",{attach:"material",color:T}))})}),Object(H.a)(M,a.Dor,{name:"Dor",height:function(e){return console.log("instance",e),e.data.open?0:1.5},push:function(e){var t=e.force,n=e.self;return t&&t>=50?[_e(n.id)]:[]},Component:ie("purple"),Component3d:Q}),Object(H.a)(M,a.Cannon,{name:"Cannon",height:function(){return 0},equip:function(e){var t=e.who,n=e.self;return oe(.8),[Ce({targetId:t.id,data:{gun:"cannon"}}),_e(n.id)]},Component:ie("red"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"rakietnica_srednia.gltf",elevationFix:-.8}))}}),Object(H.a)(M,a.Boom,{name:"Boom",height:function(){return 0},Component:ie("yellow"),Component3d:function(e){return r.a.createElement(Z,Object.assign({},e,{url:"boom.gltf"}))}}),Object(H.a)(M,a.Crossbow,{name:"Crossbow",height:function(){return 0},equip:function(e){var t=e.who,n=e.self;return oe(.8),[Ce({targetId:t.id,data:{gun:"crossbow"}}),_e(n.id)]},Component:ie("red"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"kusza.gltf",elevationFix:-.8}))}}),Object(H.a)(M,a.RocketProjectile,{name:"RocketProjectile",height:function(){return 0},projectileLaunch:function(e){var t,n=e.who;return ae("Bazooka"),[Oe({targetId:n.id,vector:(t=n.rotation,t.map((function(e){return-1*e})))},{delay:250})]},projectileHit:function(e){var t=e.self,n=e.what;e.who;return n?(ae("Alert_YES"),[_e(t.id),Se({instance:{type:a.Boom,id:Object(x.uniqueId)(),xy:t.xy,elevation:t.elevation,rotation:t.rotation,aIndex:0,zIndex:20,data:{}}})]):[_e(t.id)]},Component:ie("yellow"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"rocket.gltf"}))}}),Object(H.a)(M,a.CrossbowProjectile,{name:"Projectile",height:function(){return 0},projectileLaunch:function(e){var t=e.who;return ae("Crossbow"),[Oe({targetId:t.id,vector:[0,0]},{delay:250})]},projectileHit:function(e){var t=e.self,n=e.what;e.who;return n&&ae("Alert_YES"),[_e(t.id)]},Component:ie("pink"),Component3d:function(e){return r.a.createElement(X,Object.assign({},e,{url:"arrow.gltf"}))}}),M),de=Object(O.a)({},te,{},ce),le=function(e){var t=de[e];if(!t)throw new Error("[getDefinition] Definition for ".concat(e," not found"));return t},ue=function(e,t){var n=le(e.type);return e.elevation+n.height(e)>t.elevation},se=function(e){return Math.max.apply(Math,Object(g.a)(e.map((function(e){return le(e.type).height(e)+e.elevation}))))},pe=function(e,t){var n=le(e.type);return e.elevation+n.height(e)-t.elevation>.5},xe=function(){var e=N.flatMap((function(e,t){return e.map((function(e,n){var o=D[e];return{type:o,xy:[n,t],id:Object(x.uniqueId)(o),elevation:Math.random()/(o===a.RockFloor?1:3),rotation:Object(x.sample)([G,A,q,B]),zIndex:1,aIndex:100,data:{}}}))})),t=J.flatMap((function(t,n){return t.map((function(t,o){var r,i=L[t];if(i)return{type:i,xy:[o,n],id:i===a.Player?"player":Object(x.uniqueId)(i),elevation:(null===(r=C(e,[o,n])[0])||void 0===r?void 0:r.elevation)||0,rotation:[0,0],zIndex:2,aIndex:10,data:i===a.Button?{targetId:"Dor39"}:{}}}))})).filter((function(e){return e}));return[].concat(Object(g.a)(t),Object(g.a)(e))}(),ye={queueStared:!1,queue:[],objects:xe,cleanObjectsState:xe},ve=E()("GAME"),fe=ve("LOAD_MAP"),be=ve("RESET"),me=ve("WIN"),Ie=ve("ENQUEUE"),he=ve("TRY_NEXT_ACTION"),je=ve("NEXT_ACTION"),ge=ve("QUEUE_END"),Oe=ve("MOVE"),ke=ve("ROTATE"),Ee=ve("EQUIP"),Re=ve("PROJECTILE"),Fe=ve("FLY"),ze=ve("FLY_END"),we=ve("UPDATE_OBJECT"),Ce=ve("SET_OBJECT_DATA"),_e=ve("REMOVE"),Se=ve("TMP_SPAWN"),Ge=Object(R.reducerWithInitialState)(ye).case(fe,(function(e,t){return Object(O.a)({},ye,{objects:t})})).case(be,(function(e){return Object(O.a)({},ye,{objects:e.cleanObjectsState,cleanObjectsState:e.cleanObjectsState})})).case(me,(function(e){return Object(O.a)({},ye)})).case(Ie,(function(e,t){return Object(O.a)({},e,{queue:S(e.queue,t)})})).case(je,(function(e,t){return Object(O.a)({},e,{queueStared:!0,queue:e.queue.filter((function(e){return e!==t}))})})).case(ge,(function(e){return Object(O.a)({},e,{queueStared:!1})})).case(Oe,(function(e,t){var n=function(e,t,n){var a=e.objects,o=[],r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.push.apply(o,Object(g.a)(_(e)))},i={objects:a,actions:o},c=w(a,t);if(!c)return console.warn("[move] Target ".concat(t," not found")),i;var d=z(c.xy,n),l=C(a,d).sort((function(e,t){return t.aIndex-e.aIndex}));if(!l.length)return i;var u,s=Object(j.a)(l);try{for(s.s();!(u=s.n()).done;){var p,x=u.value,y=le(x.type),v={who:c,vector:n,state:e,self:x};if(pe(x,c))return r(null===(p=y.push)||void 0===p?void 0:p.call(y,v)),{objects:a,actions:o}}}catch(E){s.e(E)}finally{s.f()}var f,b=Object(j.a)(l);try{for(b.s();!(f=b.n()).done;){var m,I=f.value,h=le(I.type),k={who:c,vector:n,state:e,self:I};r(null===(m=h.enter)||void 0===m?void 0:m.call(h,k))}}catch(E){b.e(E)}finally{b.f()}return{objects:a=a.map((function(e){return e!==c?e:Object(O.a)({},e,{xy:d,elevation:se(l)})})),actions:o}}(e,t.targetId,t.vector),a=n.actions,o=n.objects;return Object(O.a)({},e,{objects:o,queue:S(e.queue,a)})})).case(ke,(function(e,t){var n=function(e,t,n){var a=e.objects,o=w(a,t);return{objects:a.map((function(e){return e!==o?e:Object(O.a)({},e,{rotation:n})})),actions:[]}}(e,t.targetId,t.rotation),a=n.actions,o=n.objects;return Object(O.a)({},e,{objects:o,queue:S(e.queue,a)})})).case(Ee,(function(e,t){var n=t.targetId,a=qe(e,n),o=a.actions,r=a.objects;return Object(O.a)({},e,{objects:r,queue:S(e.queue,o)})})).case(Re,(function(e,t){var n,a=t.instance,o=t.byId,r=le(a.type),i=[].concat(Object(g.a)(e.objects),[a]),c={who:w(e.objects,o),vector:a.rotation,state:e,self:a},d=(null===(n=r.projectileLaunch)||void 0===n?void 0:n.call(r,c))||[],l=[Fe({targetId:a.id})].concat(Object(g.a)(d));return Object(O.a)({},e,{objects:i,queue:S(e.queue,l)})})).case(Fe,(function(e,t){var n=function(e,t){var n=e.objects,a=[],o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.push.apply(a,Object(g.a)(_(e)))},r={objects:n,actions:a},i=w(n,t);if(!i)return console.warn("[move] Target ".concat(t," not found")),r;for(var c=i.rotation,d=i.xy,l=15;l;){l--,d=z(d,c);var u,s=C(n,d).sort((function(e,t){return t.aIndex-e.aIndex})),p=Object(j.a)(s);try{for(p.s();!(u=p.n()).done;){var x,y=u.value,v=le(y.type),f={who:i,vector:c,state:e,self:y,force:100};if(ue(y,i))return n=n.map((function(e){return e!==i?e:Object(O.a)({},e,{xy:d})})),o(ze({targetId:t,hitTargetId:y.id})),o(null===(x=v.push)||void 0===x?void 0:x.call(v,f)),{objects:n,actions:a}}}catch(b){p.e(b)}finally{p.f()}}return o(ze({targetId:t})),{objects:n=n.map((function(e){return e!==i?e:Object(O.a)({},e,{xy:d})})),actions:a}}(e,t.targetId),a=n.actions,o=n.objects;return Object(O.a)({},e,{objects:o,queue:S(e.queue,a)})})).case(ze,(function(e,t){var n=t.targetId,a=t.hitTargetId,o=w(e.objects,n),r=a?w(e.objects,a):void 0,i=[];if(o){var c,d=le(o.type),l={who:null,what:r,vector:o.rotation,state:e,self:o},u=(null===(c=d.projectileHit)||void 0===c?void 0:c.call(d,l))||[];i.push.apply(i,Object(g.a)(u))}return Object(O.a)({},e,{queue:S(e.queue,i)})})).case(Ce,(function(e,t){var n=t.targetId,a=t.data,o=Be(e,n,a),r=o.actions,i=o.objects;return Object(O.a)({},e,{objects:i,queue:S(e.queue,r)})})).case(we,(function(e,t){var n=t.targetId,a=t.objectValues;return Object(O.a)({},e,{objects:e.objects.map((function(e){return e.id===n?Object(O.a)({},e,{},a):e}))})})).case(_e,(function(e,t){return Object(O.a)({},e,{objects:e.objects.filter((function(e){return e.id!==t}))})})).case(Se,(function(e,t){var n=t.instance;return Object(O.a)({},e,{objects:[].concat(Object(g.a)(e.objects),[n])})})),qe=function(e,t){var n=[],a=w(e.objects,t);if(!a)return{objects:e.objects,actions:[]};var o,r=C(e.objects,a.xy).sort((function(e,t){return t.aIndex-e.aIndex})),i=Object(j.a)(r);try{for(i.s();!(o=i.n()).done;){var c,d=o.value,l=le(d.type),u={who:a,vector:[0,0],state:e,self:d};n.push.apply(n,Object(g.a)((null===(c=l.equip)||void 0===c?void 0:c.call(l,u))||[]))}}catch(s){i.e(s)}finally{i.f()}return{actions:n,objects:e.objects}},Be=function(e,t,n){var a=e.objects,o=w(a,t);return{objects:a.map((function(e){return e!==o?e:Object(O.a)({},e,{data:Object(O.a)({},e.data,{},n)})})),actions:[]}},Ae=Object(p.a)((function(e,t){return e.pipe(Object(f.a)(Ie.match),Object(f.a)((function(){return!t.value.game.queueStared})),Object(b.a)(he()))}),(function(e,t){return e.pipe(Object(f.a)(he.match),Object(m.a)((function(){return Object(x.first)(t.value.game.queue)})),Object(m.a)((function(e){return e?je(e):ge()})))}),(function(e,t){return e.pipe(Object(f.a)(je.match),Object(I.a)((function(e){var t,n=(null===(t=e.payload.meta)||void 0===t?void 0:t.delay)||65;return Object(y.a)(Object(v.a)(e.payload),Object(v.a)(he()).pipe(Object(h.a)(n)))})))}),(function(e,t){return e.pipe(Object(f.a)(Se.match),Object(h.a)(1e3),Object(m.a)((function(e){return _e(e.payload.instance.id)})))})),Pe=n(91),Me=n(92),Te=Object(p.a)((function(e){return e.pipe(Object(f.a)(Oe.match),Object(f.a)((function(e){return"player"===e.payload.targetId})),Object(Pe.a)((function(){return(e=.1)&&(re.volume=e),void re.play();var e})),Object(Me.a)())}),(function(e){return e.pipe(Object(f.a)(Ee.match),Object(Pe.a)((function(e){return ae("Hero_2",.7)})),Object(Me.a)())})),De=Object(s.a)(),Ne=Object(u.composeWithDevTools)({name:"App"}),Le=Object(l.combineReducers)({game:Ge}),Je=Object(l.createStore)(Le,Ne(Object(l.applyMiddleware)(De)));De.run(Object(p.a)(Te,Ae));var He=function(){var e=Object(d.c)((function(e){return e.game})),t=Object(o.useState)(!1),n=Object(F.a)(t,2),a=n[0],r=n[1],i=Object(d.b)();return{edit:function(e,t){i(we({targetId:e,objectValues:t}))},toggleEditMode:function(){r(!a)},editMode:a,copyMap:function(){var t=JSON.stringify(e.objects);navigator.clipboard.writeText(t).then((function(){console.log("Copied to clipboard")}),console.error)}}},We=function(e,t){Object(o.useEffect)((function(){var n=function(n){n.key===e&&t()};return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}))},Ue=function(e){var t=e.objects,n=Object(o.useState)(),a=Object(F.a)(n,2),i=a[0],c=a[1],d=He(),l=d.edit,u=d.copyMap,s=i&&w(t,i),p=function(e){s&&l(s.id,e)};return r.a.createElement("div",{style:{position:"absolute",zIndex:100,top:0,right:0,width:480,opacity:.8}},r.a.createElement("button",{onClick:u},"Copy map"),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"range",min:-1,max:5,step:.01,value:s.elevation,onChange:function(e){return p({elevation:parseInt(e.target.value,10)})}}),r.a.createElement("select",{value:s.type,onChange:function(e){return p({type:e.target.value})}},Object.keys(de).map((function(e){return r.a.createElement("option",null,e)})))),r.a.createElement("div",{style:{position:"relative"}},t.map((function(e){var t=e.type,n=e.id,a=e.xy,o=(e.rotation,e.elevation,e.zIndex),i=e.data,d=le(t).Component;return r.a.createElement("div",{key:n,style:{position:"absolute",left:60*a[0],top:60*a[1],width:60,height:60,zIndex:o},onClick:function(){return c(n)}},r.a.createElement(d,{instance:e},n," - ",t," ",r.a.createElement("br",null),Object(x.isEmpty)(i)?"":JSON.stringify(i,null,1)))}))))},Ye=function(){return r.a.createElement("group",null,r.a.createElement("ambientLight",{intensity:2}),r.a.createElement("pointLight",{position:[6,7,8],intensity:2.2,color:new Y.Color("#3a8dc2"),"shadow-mapSize-Height":"1024","shadow-mapSize-width":"1024","shadow-camera-far":30,"shadow-bias":-.01,castShadow:!0,"shadow-camera-left":-5,"shadow-camera-right":5,"shadow-camera-top":5,"shadow-camera-bottom":-5}),r.a.createElement("pointLight",{position:[1,3,5],intensity:2.2,color:new Y.Color("#c86b6f")}))},Ve=n(72),Qe=n(73),Xe=function(){var e=function(){var e=Object(d.c)((function(e){return e.game})),t=Object(d.b)(),n=w(e.objects,"player");n||console.warn("Player don't exists");return Object(O.a)({},e,{player:n,loadMap:function(e){t(fe(e))},reset:function(){t(be())},move:function(a){if(!e.queueStared){var o=[];if(!n)return console.warn("Player don't exists");Object(x.isEqual)(n.rotation,a)?o.push(Oe({targetId:n.id,vector:a})):o.push(ke({targetId:n.id,rotation:a})),t(Ie(o))}},equip:function(){e.queueStared||t(Ie(Ee({targetId:n.id})))},fire:function(){if(!e.queueStared){var o,r=n.id,i=n.xy,c=n.rotation,d=n.elevation,l=n.data;if(null===l||void 0===l?void 0:l.gun)o="cannon"===l.gun?{type:a.RocketProjectile,id:Object(x.uniqueId)(),xy:i,rotation:c,elevation:d+.8,aIndex:100,zIndex:10,data:l}:{type:a.CrossbowProjectile,id:Object(x.uniqueId)(),xy:i,rotation:c,elevation:d+.8,aIndex:100,zIndex:10,data:l},t(Ie(Re({byId:r,instance:o})));else ae("Alert_NO")}}})}(),t=e.objects,n=e.move,i=e.equip,c=e.fire,l=e.loadMap,u=e.reset,s=He(),p=s.editMode,y=s.toggleEditMode;We("e",y);var v=function(){return n(A)},f=function(){return n(G)},b=function(){return n(B)},m=function(){return n(q)},I=function(){return l(Ve)},h=function(){return l(Qe)};return We("1",I),We("2",h),We("r",u),We("ArrowLeft",v),We("ArrowUp",f),We("ArrowDown",b),We("ArrowRight",m),We("Enter",i),We(" ",c),r.a.createElement(r.a.Fragment,null,p&&r.a.createElement(Ue,{objects:t}),r.a.createElement("div",{style:{position:"absolute",zIndex:5,bottom:0,left:0,right:0,textAlign:"center"}},r.a.createElement("button",{onClick:v},r.a.createElement("strong",null,"\u2190")),r.a.createElement("button",{onClick:f},r.a.createElement("strong",null,"\u2191")),r.a.createElement("button",{onClick:b},r.a.createElement("strong",null,"\u2193")),r.a.createElement("button",{onClick:m},r.a.createElement("strong",null,"\u2192")),r.a.createElement("button",{onClick:i},"Equip ",r.a.createElement("small",null,"[enter]")),r.a.createElement("button",{onClick:c},"Fire ",r.a.createElement("small",null,"[space]")),r.a.createElement("button",{onClick:u},"Restart ",r.a.createElement("small",null,"[R]")),r.a.createElement("button",{onClick:I},"Map 1 ",r.a.createElement("small",null,"[1]")),r.a.createElement("button",{onClick:h},"Map 2 ",r.a.createElement("small",null,"[2]"))),r.a.createElement(W.a,{orthographic:!0,camera:{zoom:100,fov:1075,position:[1,7,7]},onCreated:function(e){e.camera.lookAt(3,1,2),e.gl.shadowMap.type=Y.PCFSoftShadowMap,e.gl.shadowMap.enabled=!0}},r.a.createElement(Ye,null),r.a.createElement(o.Suspense,{fallback:r.a.createElement("mesh",null,r.a.createElement("boxBufferGeometry",{attach:"geometry",args:[.5,.5,.5]}),r.a.createElement("meshStandardMaterial",{attach:"material",color:"red"}))},t.map((function(e){var t=le(e.type).Component3d;return r.a.createElement(t,{key:e.id,instance:e})})))))},Ke=function(){return r.a.createElement(d.a,{store:Je},r.a.createElement(Xe,null))};n(86);c.a.render(r.a.createElement(Ke,null),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.d0e886da.chunk.js.map